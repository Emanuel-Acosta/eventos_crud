<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Registro</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
			crossorigin="anonymous"
		/>
	</head>

	<body>
		<main>
			<div class="container mt-5">
				<div class="row">
					<!-- Registro (Izquierda) -->
					<div class="col-md-6">
						<h2 class="mb-4">Registro</h2>
						<form id="registerForm" action="/register" method="POST">
							<!-- Mostrar mensajes flash solo para el registro -->
							{% with messages = get_flashed_messages(with_categories=true) %}
							{% if messages %}
							<div class="flash-messages mb-3">
								{% for category, message in messages %} {% if category !=
								'login' %}
								<!-- No mostrar los mensajes con categoría 'login' -->
								<div
									class="alert {% if category == 'danger' %}alert-danger {% elif category == 'success' %}alert-success {% endif %} alert-dismissible fade show"
									role="alert"
								>
									{{ message }}
									<button
										type="button"
										class="btn-close"
										data-bs-dismiss="alert"
										aria-label="Close"
									></button>
								</div>
								{% endif %} {% endfor %}
							</div>
							{% endif %} {% endwith %}
							<div class="mb-3">
								<input
									type="text"
									id="name"
									name="name"
									required
									value="{{ request.form.name }}"
									placeholder="Nombre"
									class="form-control"
								/>
							</div>
							<div class="mb-3">
								<input
									type="text"
									id="apellido"
									name="apellido"
									required
									value="{{ request.form.apellido }}"
									placeholder="Apellido"
									class="form-control"
								/>
							</div>

							<div class="mb-3">
								<input
									type="email"
									id="email"
									name="email"
									required
									value="{{ request.form.email }}"
									placeholder="E-mail"
									class="form-control"
								/>
							</div>

							<div class="mb-3">
								<input
									type="password"
									id="password"
									name="password"
									required
									placeholder="Contraseña"
									class="form-control"
								/>
							</div>

							<div class="mb-3">
								<input
									type="password"
									id="confirmPassword"
									name="confirmPassword"
									placeholder="Repetir contraseña"
									class="form-control"
								/>
							</div>

							<div class="d-grid gap-2">
								<button type="submit" class="btn btn-primary">Registrar</button>
							</div>
						</form>
					</div>
					<!-- Inicio de Sesión (Derecha) -->
					<div class="col-md-6">
						<h2 class="mb-4">Inicio de Sesión</h2>
						<form id="loginForm" action="{{ url_for('login') }}" method="POST">
							<!-- Mostrar mensajes flash solo para el inicio de sesión -->
							{% with messages = get_flashed_messages(with_categories=true) %}
							{% if messages %}
							<div class="flash-messages">
								{% for category, message in messages %} {% if category ==
								'login' %}
								<!-- Solo mostrar mensajes con categoría 'login' -->
								<div
									class="alert alert-danger alert-dismissible fade show"
									role="alert"
								>
									{{ message }}
									<button
										type="button"
										class="btn-close"
										data-bs-dismiss="alert"
										aria-label="Close"
									></button>
								</div>
								{% endif %} {% endfor %}
							</div>
							{% endif %} {% endwith %}
							<div class="mb-3">
								<input
									type="email"
									id="loginEmail"
									name="loginEmail"
									placeholder="E-mail"
									required
									value="{{ request.form.loginEmail }}"
									class="form-control"
								/>
							</div>

							<div class="mb-3">
								<input
									type="password"
									id="loginPassword"
									placeholder="Contraseña"
									name="loginPassword"
									required
									class="form-control"
								/>
							</div>

							<div class="d-grid gap-2">
								<button type="submit" class="btn btn-success">
									Iniciar Sesión
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</main>

		<!-- Con esto podemos eliminar en la x los errores flash, con javascript -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
